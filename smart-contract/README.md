# Instructions for running smart contract

1. CD into this directory and install `truffle` and `ganache-cli`

```
cd smart-contract
npm install -g truffle ganache-cli
```

2. Run the local ethereum node (has some extra flags, so use the provided file)
```
chmod +x run-local-node.sh
./run-local-node.sh
```

3. Log into MetaMask (ideally not on your main browser) and import the accounts generated by the local node in the console log
by copying over the mnemonic. You should only need to do this once. When you restart the node, it deterministically generates the same
accounts again so you don't need to keep importing.

(Pro tip: When you restart your local node, you need to make Metamask point away from localhost:8545 to Main net and then back so that it refreshes)

4. Deploy the smart contract onto the chain.

```
truffle compile
truffle migrate
./deploy-contract.sh
```

5. Get the contract address from the console log after you run `truffle migrate` and use it
to add a "custom token" on Metamask. You should see that you have some PFC (PlanetFlareCoin) tokens
in your wallet after you add it. This is because truffle takes the public address on your test chain
and uses that to deploy the contract.

This works out of the box because PFC is ERC20 compliant, and so you can use it to transfer 
to other accounts and stuff :)

(Pro tip: When you restart your test net and redeploy PlanetFlareCoin, you
will need to re-add the contract address to MetaMask because it probably changed -- otherwise you'll just see a balance of 0)
